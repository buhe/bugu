铺垫了那么多，要在用户态打印就必须 trap 到内核态，要 trap 就必须满足

- 首先要保存 trap context ，不同的是它在用户地址空间，因为只有一个 sscratch 做中转、用来保存 sp 了，没有中转 token(保存地址空间页表的地址)的寄存器
- 还要把地址空间切换到内核，因为需要的数据结构都在内核态，所以内核栈也在内核态

### 建立内核地址空间



### 建立应用地址空间



### 跳板



### 改造 Trap



### 改造系统调用--字符输出



具体代码请参考 https://github.com/buhe/bugu/tree/6
