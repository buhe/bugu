操作系统本质是抽象层，执行环境。可以没有，一个 App 带一个，那叫做 LibOS。

因为开发操作系统的缘故，裸机没有标准库。


目标平台是 riscv64gc-unknown-none-elf ，在 .cargo/config 里声明


```rust
[build]
target = "riscv64gc-unknown-none-elf"
```


os 的内存布局是 linker-k210.ld 指定的，在 .cargo/config 里声明


```rust
[target.riscv64gc-unknown-none-elf]
rustflags = [
    "-Clink-arg=-Tsrc/linker.ld", "-Cforce-frame-pointers=yes"
]
```


[main.rs](http://main.rs) 里不使用标准库，没有 main 函数，只有语言相关的 panic_handler 在 lang_items.rs 里。


```rust
#![no_std]
#![no_main]

mod lang_items;
```


lang_items.rs 里什么都不做。
```rust
// use crate::sbi::shutdown;
use core::panic::PanicInfo;

#[panic_handler]
fn panic(_info: &PanicInfo) -> ! {
    panic!("It should shutdown!");
}
```
